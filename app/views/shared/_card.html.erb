<div class="recipes-index-card">
  <div class="recipes-index-card-content">
    <%= link_to recipe.title, recipe_path(recipe), class: "recipes-index-card-title" %>
    <p class="recipes-index-card-text">
      <%= sanitize recipe.summary %>
    </p>
    <div class="recipes-index-card-info" data-favourite-target="recipe">
      <p class="recipes-index-card-servings"><%= recipe.servings %> servings</p>
      <i class="fa-solid fa-circle recipes-index-card-heart-circle"></i>
      <p class="recipes-index-card-time"><%= recipe.cook_time %> mins</p>
      <%= turbo_frame_tag dom_id(recipe, :favourite_btn) do %>
        <% favourite_for_recipe = current_user.find_favourite_for_recipe(recipe) %>
        <% if favourite_for_recipe.nil? %>
          <%= link_to recipe_favourites_path(recipe), data: { turbo_method: :post } do %>
            <i class="fa-regular fa-heart recipes-index-card-heart"></i>
          <% end %>
        <% else %>
          <%# link to destroy the favourite %>
          <%= link_to favourite_path(favourite_for_recipe), data: { turbo_method: :delete } do %>
            <i class="fa-solid fa-heart recipes-index-card-heart"></i>
          <% end %>
        <% end %>
      <% end %>
      <%# <%= link_to "Add to Favourites", new_recipe_favourite_path(recipe), method: :post %>
    </div>
  </div>
  <div class="recipes-index-card-image">
    <%= image_tag recipe.image_url %>
  </div>
</div>
